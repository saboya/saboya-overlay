From 9edcbaf7f33cf808ccec51171b7235aafffd2640 Mon Sep 17 00:00:00 2001
From: Rodrigo Saboya <saboya@users.noreply.github.com>
Date: Fri, 27 Jan 2017 14:19:06 -0200
Subject: [PATCH] Patch to use namespaced Cryptodome.

---
 setup.py                         | 2 +-
 src/streamlink/plugins/beattv.py | 2 +-
 src/streamlink/stream/hls.py     | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/setup.py b/setup.py
index 33b502f..678875e 100644
--- a/setup.py
+++ b/setup.py
@@ -26,7 +26,7 @@ else:
     deps.append("requests>=1.0,!=2.12.0,!=2.12.1,<3.0")
 
 # this version of pycryptodome is known to work and has a Windows wheel for py2.7, py3.3-3.6
-deps.append("pycryptodome>=3.4.3,<4")
+deps.append("pycryptodomex>=3.4.3,<4")
 
 # shutil.get_terminal_size and which were added in Python 3.3
 if version_info[0] == 2:
diff --git a/src/streamlink/plugins/beattv.py b/src/streamlink/plugins/beattv.py
index 9b76f3e..dfcde20 100644
--- a/src/streamlink/plugins/beattv.py
+++ b/src/streamlink/plugins/beattv.py
@@ -3,7 +3,7 @@ import re
 from collections import namedtuple
 from io import BytesIO
 try:
-    from Crypto.Cipher import AES
+    from Cryptodome.Cipher import AES
     CAN_DECRYPT = True
 except ImportError:
     CAN_DECRYPT = False
diff --git a/src/streamlink/stream/hls.py b/src/streamlink/stream/hls.py
index 9e26053..2e8ec0f 100644
--- a/src/streamlink/stream/hls.py
+++ b/src/streamlink/stream/hls.py
@@ -4,7 +4,7 @@ from streamlink.stream.ffmpegmux import FFMPEGMuxer, MuxedStream
 from streamlink.utils.l10n import Localization
 
 try:
-    from Crypto.Cipher import AES
+    from Cryptodome.Cipher import AES
     import struct
 
 
-- 
2.10.2

